–
QC:\Projects\anderson.souza\Ritter\src\Infra.Data.Seedwork\IQueryableUnitOfWork.cs
	namespace 	
Ritter
 
. 
Infra 
. 
Data 
{ 
public 

	interface  
IQueryableUnitOfWork )
:* +
IUnitOfWork, 7
{ 
DbSet		 
<		 
TEntity		 
>		 
Set		 
<		 
TEntity		 "
>		" #
(		# $
)		$ %
where		& +
TEntity		, 3
:		4 5
class		6 ;
;		; <
Task

 
<

 
int

 
>

 
SaveChangesAsync

 "
(

" #
)

# $
;

$ %
int 
SaveChanges 
( 
) 
; 
} 
} ó
AC:\Projects\anderson.souza\Ritter\src\Infra.Data.Seedwork\ISql.cs
	namespace 	
Ritter
 
. 
Infra 
. 
Data 
{ 
public 

	interface 
ISql 
{ 
int 
ExecuteCommand 
( 
string !

sqlCommand" ,
,, -
params. 4
object5 ;
[; <
]< =

parameters> H
)H I
;I J
} 
} á
GC:\Projects\anderson.souza\Ritter\src\Infra.Data.Seedwork\Repository.cs
	namespace 	
Ritter
 
. 
Infra 
. 
Data 
{ 
public 

abstract 
class 

Repository $
:% &
IRepository' 2
{ 
	protected 

Repository 
( 
IUnitOfWork (

unitOfWork) 3
)3 4
{		 	
Ensure

 
.

 
Argument

 
.

 
NotNull

 #
(

# $

unitOfWork

$ .
,

. /
nameof

0 6
(

6 7

unitOfWork

7 A
)

A B
)

B C
;

C D

UnitOfWork 
= 

unitOfWork #
;# $
} 	
public 
IUnitOfWork 

UnitOfWork %
{& '
get( +
;+ ,
private- 4
set5 8
;8 9
}: ;
} 
} É≤
IC:\Projects\anderson.souza\Ritter\src\Infra.Data.Seedwork\Repository[].cs
	namespace		 	
Ritter		
 
.		 
Infra		 
.		 
Data		 
{

 
public 

abstract 
class 

Repository $
<$ %
TEntity% ,
>, -
:. /

Repository0 :
,: ;
IRepository< G
<G H
TEntityH O
>O P
where 
TEntity 
: 
class 
, 
IEntity &
{ 
public 
new  
IQueryableUnitOfWork '

UnitOfWork( 2
{3 4
get5 8
;8 9
private: A
setB E
;E F
}G H
	protected 

Repository 
(  
IQueryableUnitOfWork 1

unitOfWork2 <
)< =
:> ?
base@ D
(D E

unitOfWorkE O
)O P
{ 	

UnitOfWork 
= 

unitOfWork #
;# $
} 	
public 
TEntity 
Get 
( 
int 
id !
)! "
=># %

UnitOfWork& 0
.0 1
Set1 4
<4 5
TEntity5 <
>< =
(= >
)> ?
.? @
FirstOrDefault@ N
(N O
pO P
=>Q S
pT U
.U V
IdV X
==Y [
id\ ^
)^ _
;_ `
public 
async 
Task 
< 
TEntity !
>! "
GetAsync# +
(+ ,
int, /
id0 2
)2 3
=>4 6
await7 <

UnitOfWork= G
.G H
SetH K
<K L
TEntityL S
>S T
(T U
)U V
.V W
FirstOrDefaultAsyncW j
(j k
pk l
=>m o
pp q
.q r
Idr t
==u w
idx z
)z {
;{ |
public 
ICollection 
< 
TEntity "
>" #
Find$ (
(( )
)) *
=>+ -

UnitOfWork. 8
.8 9
Set9 <
<< =
TEntity= D
>D E
(E F
)F G
.G H
AsNoTrackingH T
(T U
)U V
.V W
ToListW ]
(] ^
)^ _
;_ `
public 
async 
Task 
< 
ICollection %
<% &
TEntity& -
>- .
>. /
	FindAsync0 9
(9 :
): ;
=>< >
await? D

UnitOfWorkE O
.O P
SetP S
<S T
TEntityT [
>[ \
(\ ]
)] ^
.^ _
AsNoTracking_ k
(k l
)l m
.m n
ToListAsyncn y
(y z
)z {
;{ |
public 
ICollection 
< 
TEntity "
>" #
Find$ (
(( )
ISpecification) 7
<7 8
TEntity8 ?
>? @
specificationA N
)N O
=>P R
FindSpecificS _
(_ `
specification` m
)m n
.n o
ToListo u
(u v
)v w
;w x
public 
async 
Task 
< 
ICollection %
<% &
TEntity& -
>- .
>. /
	FindAsync0 9
(9 :
ISpecification: H
<H I
TEntityI P
>P Q
specificationR _
)_ `
=>   
await   
FindSpecific   !
(  ! "
specification  " /
)  / 0
.  0 1
ToListAsync  1 <
(  < =
)  = >
;  > ?
public"" 

IPagedList"" 
<"" 
TEntity"" !
>""! "
Find""# '
(""' (
IPagination""( 3

pagination""4 >
)""> ?
=>""@ B
Find""C G
(""G H
new""H K
TrueSpecification""L ]
<""] ^
TEntity""^ e
>""e f
(""f g
)""g h
,""h i

pagination""j t
)""t u
;""u v
public$$ 
async$$ 
Task$$ 
<$$ 

IPagedList$$ $
<$$$ %
TEntity$$% ,
>$$, -
>$$- .
	FindAsync$$/ 8
($$8 9
IPagination$$9 D

pagination$$E O
)$$O P
=>%% 
await%% 
	FindAsync%% 
(%% 
new%% "
TrueSpecification%%# 4
<%%4 5
TEntity%%5 <
>%%< =
(%%= >
)%%> ?
,%%? @

pagination%%A K
)%%K L
;%%L M
public'' 

IPagedList'' 
<'' 
TEntity'' !
>''! "
Find''# '
(''' (
ISpecification''( 6
<''6 7
TEntity''7 >
>''> ?
specification''@ M
,''M N
IPagination''O Z

pagination''[ e
)''e f
{(( 	
Ensure)) 
.)) 
Argument)) 
.)) 
NotNull)) #
())# $

pagination))$ .
,)). /
nameof))0 6
())6 7

pagination))7 A
)))A B
)))B C
;))C D
return** 
FindSpecific** 
(**  
specification**  -
)**- .
.**. /
PaginateList**/ ;
(**; <

pagination**< F
)**F G
;**G H
}++ 	
public-- 
async-- 
Task-- 
<-- 

IPagedList-- $
<--$ %
TEntity--% ,
>--, -
>--- .
	FindAsync--/ 8
(--8 9
ISpecification--9 G
<--G H
TEntity--H O
>--O P
specification--Q ^
,--^ _
IPagination--` k

pagination--l v
)--v w
{.. 	
Ensure// 
.// 
Argument// 
.// 
NotNull// #
(//# $

pagination//$ .
,//. /
nameof//0 6
(//6 7

pagination//7 A
)//A B
)//B C
;//C D
return00 
await00 
FindSpecific00 %
(00% &
specification00& 3
)003 4
.004 5
PaginateListAsync005 F
(00F G

pagination00G Q
)00Q R
;00R S
}11 	
public33 
bool33 
Any33 
(33 
)33 
=>33 

UnitOfWork33 '
.33' (
Set33( +
<33+ ,
TEntity33, 3
>333 4
(334 5
)335 6
.336 7
AsNoTracking337 C
(33C D
)33D E
.33E F
Any33F I
(33I J
)33J K
;33K L
public55 
async55 
Task55 
<55 
bool55 
>55 
AnyAsync55  (
(55( )
)55) *
=>55+ -
await55. 3

UnitOfWork554 >
.55> ?
Set55? B
<55B C
TEntity55C J
>55J K
(55K L
)55L M
.55M N
AsNoTracking55N Z
(55Z [
)55[ \
.55\ ]
AnyAsync55] e
(55e f
)55f g
;55g h
public77 
virtual77 
bool77 
Any77 
(77  
ISpecification77  .
<77. /
TEntity77/ 6
>776 7
specification778 E
)77E F
=>77G I
FindSpecific77J V
(77V W
specification77W d
)77d e
.77e f
Any77f i
(77i j
)77j k
;77k l
public99 
virtual99 
async99 
Task99 !
<99! "
bool99" &
>99& '
AnyAsync99( 0
(990 1
ISpecification991 ?
<99? @
TEntity99@ G
>99G H
specification99I V
)99V W
=>99X Z
await99[ `
FindSpecific99a m
(99m n
specification99n {
)99{ |
.99| }
AnyAsync	99} Ö
(
99Ö Ü
)
99Ü á
;
99á à
public;; 
virtual;; 
void;; 
Add;; 
(;;  
TEntity;;  '
entity;;( .
);;. /
{<< 	
Ensure== 
.== 
Argument== 
.== 
NotNull== #
(==# $
entity==$ *
,==* +
nameof==, 2
(==2 3
entity==3 9
)==9 :
)==: ;
;==; <

UnitOfWork?? 
.?? 
Set?? 
<?? 
TEntity?? "
>??" #
(??# $
)??$ %
.??% &
Add??& )
(??) *
entity??* 0
)??0 1
;??1 2

UnitOfWork@@ 
.@@ 
SaveChanges@@ "
(@@" #
)@@# $
;@@$ %
}AA 	
publicCC 
virtualCC 
asyncCC 
TaskCC !
AddAsyncCC" *
(CC* +
TEntityCC+ 2
entityCC3 9
)CC9 :
{DD 	
EnsureEE 
.EE 
ArgumentEE 
.EE 
NotNullEE #
(EE# $
entityEE$ *
,EE* +
nameofEE, 2
(EE2 3
entityEE3 9
)EE9 :
)EE: ;
;EE; <
awaitGG 

UnitOfWorkGG 
.GG 
SetGG  
<GG  !
TEntityGG! (
>GG( )
(GG) *
)GG* +
.GG+ ,
AddAsyncGG, 4
(GG4 5
entityGG5 ;
)GG; <
;GG< =
awaitHH 

UnitOfWorkHH 
.HH 
SaveChangesAsyncHH -
(HH- .
)HH. /
;HH/ 0
}II 	
publicKK 
virtualKK 
voidKK 
AddKK 
(KK  
IEnumerableKK  +
<KK+ ,
TEntityKK, 3
>KK3 4
entitiesKK5 =
)KK= >
{LL 	
EnsureMM 
.MM 
ArgumentMM 
.MM 
NotNullMM #
(MM# $
entitiesMM$ ,
,MM, -
nameofMM. 4
(MM4 5
entitiesMM5 =
)MM= >
)MM> ?
;MM? @

UnitOfWorkOO 
.OO 
SetOO 
<OO 
TEntityOO "
>OO" #
(OO# $
)OO$ %
.OO% &
AddRangeOO& .
(OO. /
entitiesOO/ 7
)OO7 8
;OO8 9

UnitOfWorkPP 
.PP 
SaveChangesPP "
(PP" #
)PP# $
;PP$ %
}QQ 	
publicSS 
virtualSS 
asyncSS 
TaskSS !
AddAsyncSS" *
(SS* +
IEnumerableSS+ 6
<SS6 7
TEntitySS7 >
>SS> ?
entitiesSS@ H
)SSH I
{TT 	
EnsureUU 
.UU 
ArgumentUU 
.UU 
NotNullUU #
(UU# $
entitiesUU$ ,
,UU, -
nameofUU. 4
(UU4 5
entitiesUU5 =
)UU= >
)UU> ?
;UU? @
awaitWW 

UnitOfWorkWW 
.WW 
SetWW  
<WW  !
TEntityWW! (
>WW( )
(WW) *
)WW* +
.WW+ ,
AddRangeAsyncWW, 9
(WW9 :
entitiesWW: B
)WWB C
;WWC D
awaitXX 

UnitOfWorkXX 
.XX 
SaveChangesAsyncXX -
(XX- .
)XX. /
;XX/ 0
}YY 	
public[[ 
virtual[[ 
void[[ 
Update[[ "
([[" #
TEntity[[# *
entity[[+ 1
)[[1 2
{\\ 	
Ensure]] 
.]] 
Argument]] 
.]] 
NotNull]] #
(]]# $
entity]]$ *
,]]* +
nameof]], 2
(]]2 3
entity]]3 9
)]]9 :
)]]: ;
;]]; <

UnitOfWork__ 
.__ 
Set__ 
<__ 
TEntity__ "
>__" #
(__# $
)__$ %
.__% &
Update__& ,
(__, -
entity__- 3
)__3 4
;__4 5

UnitOfWork`` 
.`` 
SaveChanges`` "
(``" #
)``# $
;``$ %
}aa 	
publiccc 
virtualcc 
asynccc 
Taskcc !
UpdateAsynccc" -
(cc- .
TEntitycc. 5
entitycc6 <
)cc< =
{dd 	
Ensureee 
.ee 
Argumentee 
.ee 
NotNullee #
(ee# $
entityee$ *
,ee* +
nameofee, 2
(ee2 3
entityee3 9
)ee9 :
)ee: ;
;ee; <

UnitOfWorkgg 
.gg 
Setgg 
<gg 
TEntitygg "
>gg" #
(gg# $
)gg$ %
.gg% &
Updategg& ,
(gg, -
entitygg- 3
)gg3 4
;gg4 5
awaithh 

UnitOfWorkhh 
.hh 
SaveChangesAsynchh -
(hh- .
)hh. /
;hh/ 0
}ii 	
publickk 
virtualkk 
voidkk 
Updatekk "
(kk" #
IEnumerablekk# .
<kk. /
TEntitykk/ 6
>kk6 7
entitieskk8 @
)kk@ A
{ll 	
Ensuremm 
.mm 
Argumentmm 
.mm 
NotNullmm #
(mm# $
entitiesmm$ ,
,mm, -
nameofmm. 4
(mm4 5
entitiesmm5 =
)mm= >
)mm> ?
;mm? @

UnitOfWorkoo 
.oo 
Setoo 
<oo 
TEntityoo "
>oo" #
(oo# $
)oo$ %
.oo% &
UpdateRangeoo& 1
(oo1 2
entitiesoo2 :
)oo: ;
;oo; <

UnitOfWorkpp 
.pp 
SaveChangespp "
(pp" #
)pp# $
;pp$ %
}qq 	
publicss 
virtualss 
asyncss 
Taskss !
UpdateAsyncss" -
(ss- .
IEnumerabless. 9
<ss9 :
TEntityss: A
>ssA B
entitiesssC K
)ssK L
{tt 	
Ensureuu 
.uu 
Argumentuu 
.uu 
NotNulluu #
(uu# $
entitiesuu$ ,
,uu, -
nameofuu. 4
(uu4 5
entitiesuu5 =
)uu= >
)uu> ?
;uu? @

UnitOfWorkww 
.ww 
Setww 
<ww 
TEntityww "
>ww" #
(ww# $
)ww$ %
.ww% &
UpdateRangeww& 1
(ww1 2
entitiesww2 :
)ww: ;
;ww; <
awaitxx 

UnitOfWorkxx 
.xx 
SaveChangesAsyncxx -
(xx- .
)xx. /
;xx/ 0
}yy 	
public{{ 
virtual{{ 
void{{ 
Remove{{ "
({{" #
TEntity{{# *
entity{{+ 1
){{1 2
{|| 	
Ensure}} 
.}} 
Argument}} 
.}} 
NotNull}} #
(}}# $
entity}}$ *
,}}* +
nameof}}, 2
(}}2 3
entity}}3 9
)}}9 :
)}}: ;
;}}; <

UnitOfWork 
. 
Set 
< 
TEntity "
>" #
(# $
)$ %
.% &
Remove& ,
(, -
entity- 3
)3 4
;4 5

UnitOfWork
ÄÄ 
.
ÄÄ 
SaveChanges
ÄÄ "
(
ÄÄ" #
)
ÄÄ# $
;
ÄÄ$ %
}
ÅÅ 	
public
ÉÉ 
virtual
ÉÉ 
async
ÉÉ 
Task
ÉÉ !
RemoveAsync
ÉÉ" -
(
ÉÉ- .
TEntity
ÉÉ. 5
entity
ÉÉ6 <
)
ÉÉ< =
{
ÑÑ 	
Ensure
ÖÖ 
.
ÖÖ 
Argument
ÖÖ 
.
ÖÖ 
NotNull
ÖÖ #
(
ÖÖ# $
entity
ÖÖ$ *
,
ÖÖ* +
nameof
ÖÖ, 2
(
ÖÖ2 3
entity
ÖÖ3 9
)
ÖÖ9 :
)
ÖÖ: ;
;
ÖÖ; <

UnitOfWork
áá 
.
áá 
Set
áá 
<
áá 
TEntity
áá "
>
áá" #
(
áá# $
)
áá$ %
.
áá% &
Remove
áá& ,
(
áá, -
entity
áá- 3
)
áá3 4
;
áá4 5
await
àà 

UnitOfWork
àà 
.
àà 
SaveChangesAsync
àà -
(
àà- .
)
àà. /
;
àà/ 0
}
ââ 	
public
ãã 
virtual
ãã 
void
ãã 
Remove
ãã "
(
ãã" #
IEnumerable
ãã# .
<
ãã. /
TEntity
ãã/ 6
>
ãã6 7
entities
ãã8 @
)
ãã@ A
{
åå 	
Ensure
çç 
.
çç 
Argument
çç 
.
çç 
NotNull
çç #
(
çç# $
entities
çç$ ,
,
çç, -
nameof
çç. 4
(
çç4 5
entities
çç5 =
)
çç= >
)
çç> ?
;
çç? @

UnitOfWork
èè 
.
èè 
Set
èè 
<
èè 
TEntity
èè "
>
èè" #
(
èè# $
)
èè$ %
.
èè% &
RemoveRange
èè& 1
(
èè1 2
entities
èè2 :
)
èè: ;
;
èè; <

UnitOfWork
êê 
.
êê 
SaveChanges
êê "
(
êê" #
)
êê# $
;
êê$ %
}
ëë 	
public
ìì 
virtual
ìì 
async
ìì 
Task
ìì !
RemoveAsync
ìì" -
(
ìì- .
IEnumerable
ìì. 9
<
ìì9 :
TEntity
ìì: A
>
ììA B
entities
ììC K
)
ììK L
{
îî 	
Ensure
ïï 
.
ïï 
Argument
ïï 
.
ïï 
NotNull
ïï #
(
ïï# $
entities
ïï$ ,
,
ïï, -
nameof
ïï. 4
(
ïï4 5
entities
ïï5 =
)
ïï= >
)
ïï> ?
;
ïï? @

UnitOfWork
óó 
.
óó 
Set
óó 
<
óó 
TEntity
óó "
>
óó" #
(
óó# $
)
óó$ %
.
óó% &
RemoveRange
óó& 1
(
óó1 2
entities
óó2 :
)
óó: ;
;
óó; <
await
òò 

UnitOfWork
òò 
.
òò 
SaveChangesAsync
òò -
(
òò- .
)
òò. /
;
òò/ 0
}
ôô 	
public
õõ 
virtual
õõ 
void
õõ 
Remove
õõ "
(
õõ" #
ISpecification
õõ# 1
<
õõ1 2
TEntity
õõ2 9
>
õõ9 :
specification
õõ; H
)
õõH I
{
úú 	
Ensure
ùù 
.
ùù 
Argument
ùù 
.
ùù 
NotNull
ùù #
(
ùù# $
specification
ùù$ 1
,
ùù1 2
nameof
ùù3 9
(
ùù9 :
specification
ùù: G
)
ùùG H
)
ùùH I
;
ùùI J
var
üü 
entities
üü 
=
üü 

UnitOfWork
üü %
.
†† 
Set
†† 
<
†† 
TEntity
†† 
>
†† 
(
†† 
)
†† 
.
°° 
Where
°° 
(
°° 
specification
°° $
.
°°$ %
SatisfiedBy
°°% 0
(
°°0 1
)
°°1 2
)
°°2 3
.
¢¢ 
ToList
¢¢ 
(
¢¢ 
)
¢¢ 
;
¢¢ 

UnitOfWork
§§ 
.
•• 
Set
•• 
<
•• 
TEntity
•• 
>
•• 
(
•• 
)
•• 
.
¶¶ 
RemoveRange
¶¶ 
(
¶¶ 
entities
¶¶ %
)
¶¶% &
;
¶¶& '

UnitOfWork
®® 
.
®® 
SaveChanges
®® "
(
®®" #
)
®®# $
;
®®$ %
}
©© 	
public
´´ 
virtual
´´ 
async
´´ 
Task
´´ !
RemoveAsync
´´" -
(
´´- .
ISpecification
´´. <
<
´´< =
TEntity
´´= D
>
´´D E
specification
´´F S
)
´´S T
{
¨¨ 	
Ensure
≠≠ 
.
≠≠ 
Argument
≠≠ 
.
≠≠ 
NotNull
≠≠ #
(
≠≠# $
specification
≠≠$ 1
,
≠≠1 2
nameof
≠≠3 9
(
≠≠9 :
specification
≠≠: G
)
≠≠G H
)
≠≠H I
;
≠≠I J
var
ØØ 
entities
ØØ 
=
ØØ 

UnitOfWork
ØØ %
.
∞∞ 
Set
∞∞ 
<
∞∞ 
TEntity
∞∞ 
>
∞∞ 
(
∞∞ 
)
∞∞ 
.
±± 
Where
±± 
(
±± 
specification
±± $
.
±±$ %
SatisfiedBy
±±% 0
(
±±0 1
)
±±1 2
)
±±2 3
.
≤≤ 
ToList
≤≤ 
(
≤≤ 
)
≤≤ 
;
≤≤ 

UnitOfWork
¥¥ 
.
µµ 
Set
µµ 
<
µµ 
TEntity
µµ 
>
µµ 
(
µµ 
)
µµ 
.
∂∂ 
RemoveRange
∂∂ 
(
∂∂ 
entities
∂∂ %
)
∂∂% &
;
∂∂& '
await
∏∏ 

UnitOfWork
∏∏ 
.
∏∏ 
SaveChangesAsync
∏∏ -
(
∏∏- .
)
∏∏. /
;
∏∏/ 0
}
ππ 	
private
ªª 

IQueryable
ªª 
<
ªª 
TEntity
ªª "
>
ªª" #
FindSpecific
ªª$ 0
(
ªª0 1
ISpecification
ªª1 ?
<
ªª? @
TEntity
ªª@ G
>
ªªG H
specification
ªªI V
)
ªªV W
{
ºº 	
Ensure
ΩΩ 
.
ΩΩ 
Argument
ΩΩ 
.
ΩΩ 
NotNull
ΩΩ #
(
ΩΩ# $
specification
ΩΩ$ 1
,
ΩΩ1 2
nameof
ΩΩ3 9
(
ΩΩ9 :
specification
ΩΩ: G
)
ΩΩG H
)
ΩΩH I
;
ΩΩI J
return
ææ 

UnitOfWork
ææ 
.
ææ 
Set
ææ !
<
ææ! "
TEntity
ææ" )
>
ææ) *
(
ææ* +
)
ææ+ ,
.
øø 
AsNoTracking
øø 
(
øø 
)
øø 
.
¿¿ 
Where
¿¿ 
(
¿¿ 
specification
¿¿ $
.
¿¿$ %
SatisfiedBy
¿¿% 0
(
¿¿0 1
)
¿¿1 2
)
¿¿2 3
;
¿¿3 4
}
¡¡ 	
}
¬¬ 
}√√ 